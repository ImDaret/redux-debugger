{"version":3,"file":"redux-thunk.js","sources":["../src/index.ts"],"sourcesContent":["import type { Action, AnyAction } from 'redux'\n\nimport type { ThunkMiddleware } from './types'\n\nexport type {\n  ThunkAction,\n  ThunkDispatch,\n  ThunkActionDispatch,\n  ThunkMiddleware\n} from './types'\n\n/** A function that accepts a potential \"extra argument\" value to be injected later,\n * and returns an instance of the thunk middleware that uses that value\n */\nfunction createThunkMiddleware<\n  State = any,\n  BasicAction extends Action = AnyAction,\n  ExtraThunkArg = undefined\n>(extraArgument?: ExtraThunkArg) {\n  // Standard Redux middleware definition pattern:\n  // See: https://redux.js.org/tutorials/fundamentals/part-4-store#writing-custom-middleware\n  const middleware: ThunkMiddleware<State, BasicAction, ExtraThunkArg> =\n    ({ dispatch, getState }) =>\n    next =>\n    action => {\n      // The thunk middleware looks for any functions that were passed to `store.dispatch`.\n      // If this \"action\" is really a function, call it and return the result.\n      if (typeof action === 'function') {\n        // Inject the store's `dispatch` and `getState` methods, as well as any \"extra arg\"\n        return action(dispatch, getState, extraArgument)\n      }\n\n      // Otherwise, pass the action down the middleware chain as usual\n      return next(action)\n    }\n  return middleware\n}\n\nconst thunk = createThunkMiddleware() as ThunkMiddleware & {\n  withExtraArgument<\n    ExtraThunkArg,\n    State = any,\n    BasicAction extends Action = AnyAction\n  >(\n    extraArgument: ExtraThunkArg\n  ): ThunkMiddleware<State, BasicAction, ExtraThunkArg>\n}\n\n// Attach the factory function so users can create a customized version\n// with whatever \"extra arg\" they want to inject into their thunks\nthunk.withExtraArgument = createThunkMiddleware\n\nexport default thunk\n"],"names":["createThunkMiddleware","extraArgument","middleware","dispatch","getState","next","action","thunk","withExtraArgument"],"mappings":";;;;;;EAWA;EACA;EACA;EACA,SAASA,qBAAT,CAIEC,aAJF,EAIiC;EAC/B;EACA;EACA,MAAMC,UAA8D,GAClE,SADIA,UACJ;EAAA,QAAGC,QAAH,QAAGA,QAAH;EAAA,QAAaC,QAAb,QAAaA,QAAb;EAAA,WACA,UAAAC,IAAI;EAAA,aACJ,UAAAC,MAAM,EAAI;EACR;EACA;EACA,YAAI,OAAOA,MAAP,KAAkB,UAAtB,EAAkC;EAChC;EACA,iBAAOA,MAAM,CAACH,QAAD,EAAWC,QAAX,EAAqBH,aAArB,CAAb;EACD,SANO;;;EASR,eAAOI,IAAI,CAACC,MAAD,CAAX;EACD,OAXG;EAAA,KADJ;EAAA,GADF;;EAcA,SAAOJ,UAAP;EACD;;MAEKK,KAAK,GAAGP,qBAAqB;EAWnC;;EACAO,KAAK,CAACC,iBAAN,GAA0BR,qBAA1B;;;;;;;;"}